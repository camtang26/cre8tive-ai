### 5.5 Optimize Animations for 60fps

To achieve ~16ms per frame budget: - Often less than 8ms of scripting, <4ms style/layout, <4ms paint per frame yields ~16ms total. Use that as a rough internal target. - **Reduce Draw Calls:** If animating many small elements (like confetti or particles), consider drawing them to a single canvas and animating that canvas (or using GSAP's Particles or custom logic). One canvas with 100 particles is often cheaper than 100 DOM elements moving. - **Layer trick:** If animating something that covers the screen (like a full-screen slide), hide large layers that are behind it to reduce paint. E.g., when a full-screen panel slides in, you might set `display:none` on other content behind it temporarily. - **Use** `autoAlpha`**:** This GSAP property animates opacity and toggles visibility to `hidden` when opacity hits 0. Using it (instead of opacity alone) prevents the browser from painting the element at 0 opacity (since hidden means it's not in rendering tree). This can save a bit of paint cost for fully invisible elements. - **Throttle ScrollTrigger refresh**: ScrollTrigger auto-refreshes on window resize or some DOM changes. If you have a page with constantly resizing content or many triggers, refresh could be heavy. GSAP is pretty efficient here (debounces resize, etc.), but if you do manual `ScrollTrigger.refresh()` calls, ensure they aren't too frequent. - **Scrub vs immediate**: Animations tied to scroll can either update continuously (scrub) or just trigger discrete plays. If you notice scrubbing causing slight jank and it's not crucial, you could instead design it to fire once (no scrub) which is lighter (doesn't update every scroll tick). Or set `scrub: 0.1` instead of `true` to ease updates. - **Comparing CSS vs GSAP performance:** Sometimes one might wonder if a CSS keyframes animation would be faster. In most cases, GSAP overhead is minimal -- real cost is painting. CSS animations can skip JS cost, but they lack control. GSAP also can leverage the browser's native drive where possible (like with WAAPI if used under the hood). The difference is usually negligible unless you have thousands of elements (in which case neither CSS nor JS will be super smooth). That said, CSS animations on very simple stuff (like a simple infinite spinner) could be left as CSS to lighten JS load.
